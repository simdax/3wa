extends layout

mixin stars()
  - var n = 3
  while n > 0
    if name != null
      i.fa.fa-star(:style='{ opacity: opacity}')
    else
      i.fa.fa-star-o
    - n--

mixin badge(user,id)
  li.sitesBadge(id=id)
    a(href="/users/"+user.username).image
      p= user.username
      img(src=user.username+'prev.png')
    .infos
      ul
        for v, info in user.infos
          li #{v} : #{info}
      if name != null
        .stars(@mousemove="rate($event)" @click="go")
          if name != user.username
            +stars
      else
        .stars-plouc
          +stars


block content
  h1 
    | Les crÃ©ations de tous 
    i.fa.fa-heart
  h2
    | Si tu veux comment, inscris-toi 
    i.fa.fa-heart
  ul.wrap
    each user in users
      if user.username == name
        +badge(user,"moi")
        script
          include:coffee-script javascripts/stars.coffee
      else
        +badge(user,"autres")